@using P1.Services
@using MudBlazor
@using P1.Models
@inherits ViewModelComponentBase

@inject IGameplayRulesService _gameplayRulesService

<MudDropZone  @key="@(_viewModel.HandCards.Any() ? _viewModel.HandCards.First().HandOrder : -1)"
    Class="hand hand-drop-zone mt-3 mb-2 rounded-lg d-flex flex-grow-1  flex-wrap " 
             T="CardVM"
             Identifier="hand"
             ItemDisabled="@(card => _viewModel.IsDraggingDisabled(card))"
             CanDrop="@((card) => _gameplayRulesService.CanCardBeMovedToHand(card))"/>
             
<style>
    .hand-drop-zone {
        align-items: center;
        justify-content: center;
        min-width: 900px;
        max-width: 900px;
        min-height: 137px;
        max-height: 137px;
        display: flex
    }

    .hand-drop-zone .card {
        margin: 7px;
    }

</style>

@code {

    protected override void OnInitialized()
    {
        _viewModel.OnViewStateChanged += StateHasChanged;
    }

}